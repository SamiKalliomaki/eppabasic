<!DOCTYPE html>
<html>
<head>
    <title>Eppabasic</title>
    <style>
        #code {
            width: 100%;
            height: 30em;
        }

        #errBox {
            color: #f00;
        }
    </style>
    <!--Compiler recources-->
    <script src="compiler/static/math.js"></script>
    <script src="compiler/static/memory.js"></script>
    <script src="compiler/static/string.js"></script>
    <!--Compiler-->
    <script src="compiler/polyfill.js"></script>
    <script src="compiler/nodes.js"></script>
    <script src="compiler/types.js"></script>
    <script src="compiler/lexer.js"></script>
    <script src="compiler/parser.js"></script>
    <script src="compiler/typechecker.js"></script>
    <script src="compiler/atomicchecker.js"></script>
    <script src="compiler/compiler.js"></script>
    <!--Editor-->
    <script src="editor.js"></script>
    <script>
        window.addEventListener('load', function init() {
            var editor = new Editor();
            window.ebeditor = editor;
            document.getElementById('compile&run').addEventListener('click', function compilerun() {
                editor.parse();
                editor.compile();

                editor.runtimeReady(function ready() {
                    editor.window.ebruntime.init();
                    editor.window.ebruntime.start();
                });
                editor.openRuntime();
            }, false);
            //document.getElementById('compile&download').addEventListener('click', function compiledownload() {
            //    editor.parse();
            //    editor.compile();

            //    editor.runtimeReady(function ready() {
            //        var code = editor.window.document.documentElement.innerHTML;
            //        editor.closeRuntime();

            //        var blob = new Blob([code]);
            //        var url = URL.createObjectURL(blob);
            //        document.getElementById('downloadlink').href = url;
            //    });
            //    editor.openRuntime();
            //}, false);
        });
    </script>
</head>
<body>
    <div>
        <a href="examples">Check for example codes!</a>
    </div>
    <textarea id="code"></textarea>
    <div id="errBox"></div>
    <button id="compile&run">Compile&amp;Run</button>
    <pre id="codeBox"></pre>
    <!--<button id="compile&download">Compile&amp;Download</button>
    <a id="downloadlink">Download as a standalone application (under work)</a>-->
</body>
</html>
