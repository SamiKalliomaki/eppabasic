function __meminit(size){size=size|0;while((size&7)|0)size=(size-1)|0;MEMS32[0>>2]=0;MEMS32[4>>2]=(size-8)|0;MEMS32[((size-8)|0)>>2]=0;NEXT_BLOCK=0;HEAP_END=size;}function __memreserve(size){size=size|0;var header=0;var footer=0;var i=0;size=(size+7)&0xfffffff8;size=(size+8)|0;header=__memfind(size|0)|0;footer=(header+(MEMS32[(header+4)>>2]|0))|0;if((size|0)<(MEMS32[((header|0)+4)>>2]|0)){MEMS32[((header|0)+4)>>2]=size;MEMS32[((header|0)+size)>>2]=header;MEMS32[((header|0)+size+4)>>2]=(footer-header-size)|0;MEMS32[footer>>2]=(header+size)|0;}MEMS32[(header+4)>>2]=MEMS32[(header+4)>>2]|1;header=(header+8)|0;size=(size-8)|0;for(i=0;(i|0)<(size|0);i=(i+1)|0){MEMS32[(header+i)>>2]=0;}return header|0;}function __memfind(size){size=size|0;var around=0;var start=0;start=NEXT_BLOCK;while(1){if((MEMS32[((NEXT_BLOCK+4)|0)>>2]&1)==0){if((MEMS32[((NEXT_BLOCK+4)|0)>>2]|0)>=(size|0)){return NEXT_BLOCK|0;}}NEXT_BLOCK=(NEXT_BLOCK+(MEMS32[((NEXT_BLOCK+4)|0)>>2]|0))&0xfffffff8;if(((NEXT_BLOCK+8)|0)>=(HEAP_END|0)){NEXT_BLOCK=0;around=1;}if((around|0)&((NEXT_BLOCK|0)>=(start|0))){__panic();return 0;}}return 0;}function __memfree(ptr){ptr=ptr|0;ptr=(ptr-8)|0;MEMS32[(ptr+4)>>2]=MEMS32[(ptr+4)>>2]&0xfffffffe;__memcoalesce(ptr);}function __memcoalesce(header){header=header|0;var header2=0;var footer=0;var tmp=0;header2=(header+(MEMS32[(header+4)>>2]|0))|0;if((MEMS32[((header2+4)|0)>>2]&1)==0){MEMS32[((header+4)|0)>>2]=((MEMS32[((header+4)|0)>>2]|0)+(MEMS32[((header2+4)|0)>>2]|0));footer=(header+(MEMS32[(header+4)>>2]|0))|0;MEMS32[footer>>2]=header;}header2=MEMS32[header>>2]|0;if((MEMS32[((header2+4)|0)>>2]&1)==0){tmp=header;header=header2;header2=tmp;MEMS32[((header+4)|0)>>2]=((MEMS32[((header+4)|0)>>2]|0)+(MEMS32[((header2+4)|0)>>2]|0));footer=(header+(MEMS32[(header+4)>>2]|0))|0;MEMS32[footer>>2]=header;}NEXT_BLOCK=header;}
